<?xml version="1.0" encoding="UTF-8"?>
<installation version="5.0">
    <!-->The information given in info, except for javaversion be shown in HelloPanel <-->
    <info>
        <appname>ENCUESTAME</appname>
        <appversion>1.0.0</appversion>
        <url>http://www.encuestame.org/</url>
        <javaversion>1.7</javaversion>
        <authors>
            <author name="Diana Morales" email="dianmorales@gmail.com"/>
            <author name="Juan Picado" email="juanpicado19@gmail.com"/>
        </authors>
        <!--><pack200/><-->
        <uninstaller name="${application.name}-uninstaller.jar"></uninstaller>
         <summarylogfilepath>$INSTALL_PATH/encuestame_install.log</summarylogfilepath>
    </info>

    <variables>
        <variable name="home.directory" value="home"/> 
        <variable name="capcha.private.key" value=" "/>
        <variable name="capcha.private.key" value=" "/>
        <variable name="hsql.directory" value="hsqldb"/> 
        <variable name="hsql.mem" value="jdbc:hsqldb:mem:."/> 
    </variables>


    <dynamicvariables>
        <variable checkonce="false" ignorefailure="true" name="db.type.selection" value="${db.type.selection}"/>
        <variable checkonce="false" ignorefailure="true" name="db.hostname" value="localhost"/>
        <variable checkonce="false" ignorefailure="true" name="db.port" value="3306"/>
        <variable checkonce="false" ignorefailure="true" name="db.username" value="root"/>
        <variable checkonce="false" ignorefailure="true" name="db.password" value=" "/>
        <variable checkonce="false" ignorefailure="true" name="db.name" value=" "/>
        <!-->
           <variable checkonce="false" ignorefailure="true" name="db.datasource.classname" value="${db.datasource.classname}" /> <-->
        <variable checkonce="false" ignorefailure="true" name="db.datasource.dialect"
                  value="org.hibernate.dialect.MySQLInnoDBDialect"/>
        <variable checkonce="false" ignorefailure="true" name="db.datasource.classname" value="com.mysql.jdbc.Driver"/>
        <variable checkonce="false" ignorefailure="true" name="hsqldb.file.name" value=" "/>
        <variable checkonce="false" ignorefailure="true" name="select.hsql.url.radio" value=" "/>
    </dynamicvariables>

    <!--> Define preference items of graphic user interfaces<-->
    <guiprefs resizable="no" width="700" height="600">
        <laf name="looks"><!-->Specifies the look and feel for a particular OS<-->
            <param name="variant" value="windows"/>
            <os family="windows"/>
        </laf>
        <modifier key="useHeadingForSummary" value="yes"/>
        <modifier key="useHeadingPanel" value="yes"/>
        <modifier key="headingLineCount" value="1"/>
        <modifier key="headingFontSize" value="1.5"/>
        <modifier key="headingBackgroundColor" value="0x00ffffff"/>
        <modifier key="headingPanelCounter" value="progressbar"/>
        <modifier key="headingPanelCounterPos" value="inNavigationPanel"/>
        <!--> Use Splash Screen(screen before first panel)
        <modifier key="useSplashScreen" value="2000"/> <-->  
    </guiprefs>

    <!--> It is used to define the language packages that you want used in the installation. Not all are available. check DOC<-->
    <locale>
        <langpack iso3="eng"/>
        <langpack iso3="spa" />
        <!--> <langpack iso3="deu" />  -->
    </locale>

    <conditions>
        <!--> <-->
        <condition type="variable" id="mysql.db.selected">
            <name>db.type.selection</name>
            <value>mysql</value>
        </condition>
        <condition type="variable" id="hsql.db.selected">
            <name>db..type.selection</name>
            <value>hsql</value>
        </condition>
        <condition type="variable" id="postgres.db.selected">
            <name>db.type.selection</name>
            <value>postgres</value>
        </condition>
        <!--> <-->
        <condition type="variable" id="hsql.ds.cn.selected">
            <name>db.datasource.classname</name>
            <value>org.hsqldb.jdbcDriver</value>
        </condition>
        <condition type="variable" id="mysql.ds.cn.selected">
            <name>db.datasource.classname</name>
            <value>com.mysql.jdbc.Driver</value>
        </condition>
        <condition type="variable" id="postgres.ds.cn.selected">
            <name>db.datasource.classname</name>
            <value>org.postgres.jdbcDriver</value>
        </condition>
        <condition type="variable" id="database.mysql.radio.selection">
            <name>db.type.selection</name>
            <value>mysql</value>
        </condition>
        <condition type="variable" id="database.hsql.radio.selection">
            <name>db.type.selection</name>
            <value>hsql</value>
        </condition>
        <condition type="variable" id="hsql.url.radio.selection">
            <name>select.hsql.url.radio</name>
            <value>file</value>
        </condition>
        <condition type="and" id="hsqlParametersCondition">
            <condition type="ref" refid="hsql.url.radio.selection"/>
         <condition type="ref" refid="database.hsql.radio.selection" />
        </condition>
        
    </conditions>

    <resources>
        <!-->Imagen<-->
        <res id="Heading.image" src="resources/logos-enme/horizontal/encuestame_horizontal_small_alpha.png"/>
        <res id="atlassian" src="resources/logos-sponsors/atlassian/atlassian-rgb-navy-xsmall.png" />
        <res id="jetbrain" src="resources/logos-sponsors/jetbrains/logo_jetbrain_xs.png" />
        <res id="installer.langsel.img" src="resources/logos-enme/vertical/encuestame_v_small_alpha.png"/> <!-->Image to language selection panel  <--> 
        <!--> Custom Panels <-->
        
        <res id="HTMLHelloPanel.info" src="resources/panels/eng/hello.html"/> 
        <res id="HTMLInfoPanel.info" src="resources/panels/eng/readme.html"/> 
        <res id="LicencePanel.licence" src="resources/panels/eng/license.html"/>
        <res id="HTMLInfoPanel.sponsors" src="resources/panels/eng/sponsors.html"/> 
        
        
        <!--> Custom Panels SPA<-->
        <res id="HTMLHelloPanel.info_spa" parse="yes" src="resources/panels/spa/hello_spa.html" />
        <res id="HTMLInfoPanel.info_spa" src="resources/panels/spa/readme_spa.html"/>
        <res id="LicencePanel.licence_spa" src="resources/panels/spa/license_spa.html"/>
        <res id="HTMLInfoPanel.sponsors_spa" src="resources/panels/spa/sponsors_spa.html"/>


        <res id="userInputSpec.xml" src="resources/userInputSpec.xml"/>
        
        <!-->Splash Image Resource
        <res id="Splash.image" src="resources/logos-enme/vertical/encuestame_v_small_alpha.png"/><-->
        <!-->Image to language selection panel  <--> 

        <!--> I18n <-->
        <res id="CustomLangPack.xml_eng" src="resources/i18n/panels/CustomLangPack.xml_eng" />
        <res id="CustomLangPack.xml_spa" src="resources/i18n/panels/CustomLangPack.xml_spa" /> 
        <res id="packsLang.xml_eng" src="resources/i18n/panels/packsLang.xml_eng" />      
        <res id="packsLang.xml_spa" src="resources/i18n/panels/packsLang.xml_spa" />   
    </resources>

    <jar src="resources/mysql-connector-java-5.1.21.jar" stage="install"/>
     <!-->  <jar src="resources/log4j-1.2.17.jar" stage="install"/> <-->
    <jar src="resources/jdbcConnectionValidator.jar" stage="install"/>
    <jar src="resources/commons-logging-1.2.jar" stage="install"/>
    <!--> <jar src="resources/postgresql-9.2-1003-jdbc3.jar" stage="install" /> <-->


    <!-->Panels or screens to show. Will be shown in the defined order<-->
    <panels>
        <panel classname="HTMLHelloPanel"/>
        <panel classname="HTMLInfoPanel"/>
        <panel classname="LicencePanel"/>
        <panel classname="TargetPanel" id="targetpanel"/>
        <panel classname="UserInputPanel" id="select.database.panel"/>
        <panel classname="UserInputPanel" id="dbase.connection.panel" condition="database.mysql.radio.selection">
            <validator classname="org.encuestame.installer.izpack.JDBCConnectionValidator"/>
        </panel>
        <panel classname="UserInputPanel" id="recaptcha"/>
        <!--><panel classname="DataCheckPanel" /><-->
        <panel classname="PacksPanel" id="enme_pack_select"/>
        <panel classname="InstallPanel" id="installpanel"/>
        <panel classname="SummaryPanel" id="summarypanel"/>
        <panel classname="HTMLInfoPanel" id="sponsors"/>
        <panel classname="SimpleFinishPanel"/>
    </panels>

    <packs>
        <pack name="tomcat" preselected="yes" required="yes">
            <description>Tomcat container.</description>
            <fileset dir="tomcat/apache-tomcat-7.0.59" targetdir="$INSTALL_PATH/tomcat"/>
        </pack>

        <pack name="Basic Files" preselected="yes" required="yes">
            <description>Basic Files </description>
            <file src="property-files/encuestame-config-custom.properties" targetdir="$INSTALL_PATH/tomcat/lib"
                  override="true" />
            <parsable targetfile="$INSTALL_PATH/tomcat/lib/encuestame-config-custom.properties" type="javaprop"/>
            <file src="home/" targetdir="$INSTALL_PATH/"/>
            <file src="resources/License.txt" targetdir="$INSTALL_PATH/"/>
            <file src="resources/Readme.txt" targetdir="$INSTALL_PATH/"/>
            <file src="war/encuestame.war" targetdir="$INSTALL_PATH/tomcat/webapps"/>
        </pack>
    </packs>
</installation>